/*****************************************************************************/
/*  Copyright (C) 2019 Siemens Aktiengesellschaft. All rights reserved.      */
/*****************************************************************************/
/*  This program is protected by German copyright law and international      */
/*  treaties. The use of this software including but not limited to its      */
/*  Source Code is subject to restrictions as agreed in the license          */
/*  agreement between you and Siemens.                                       */
/*  Copying or distribution is not allowed unless expressly permitted        */
/*  according to your license agreement with Siemens.                        */
/*****************************************************************************/
/*                                                                           */
/*  P r o j e c t         &P: PROFINET IO Runtime Software              :P&  */
/*                                                                           */
/*  P a c k a g e         &W: PROFINET IO Runtime Software              :W&  */
/*                                                                           */
/*  C o m p o n e n t     &C: HIF (Host Interface)                      :C&  */
/*                                                                           */
/*  F i l e               &F: hif_ser_ioh.c                             :F&  */
/*                                                                           */
/*  V e r s i o n         &V: BC_PNRUN_P07.01.00.00_00.02.00.15         :V&  */
/*                                                                           */
/*  D a t e  (YYYY-MM-DD) &D: 2019-08-05                                :D&  */
/*                                                                           */
/*****************************************************************************/
/*                                                                           */
/*  D e s c r i p t i o n :                                                  */
/*                                                                           */
/*  Automatically generated with HIF Code Generator v2.4.1                   */
/*                                                                           */
/*                                                                           */
/*  !!!ATTENTION: Do not edit this file.                                     */
/*                Please use the HIF Code Generator to generate this file.   */
/*                                                                           */
/*  The hash value was automatically calculated by HIF Code Generator!       */
/*  HASH-VALUE: qIjSHP+idb7HnHtRtUxFkk89cea6/tg3M/MjA7wyzIo=                 */
/*****************************************************************************/

#if defined(TOOL_CHAIN_MICROSOFT) /* Microsoft Visual C++ */
#pragma component(browser, off, references)
#endif

#define LTRC_ACT_MODUL_ID   109
#define HIF_MODULE_ID       LTRC_ACT_MODUL_ID

#include "hif_int.h"      

/// @cond PREVENT_DOXYGEN
HIF_FILE_SYSTEM_EXTENSION(HIF_MODULE_ID)

/// @endcond
#if ( (HIF_CFG_COMPILE_SERIALIZATION == 1) && (HIF_CFG_USE_IOH == 1) )


//lint -save -e506
// Warning 506: Constant value Boolean; It is expected that these issues are optimized while compilation of source code.
//lint -save -e774
// Warning 774: If always evaluates to True; It is expected that these issues are optimized while compilation of source code.

/* Prototypes */


/* Helper Functions */

/**
* \brief Function serializes the RQB to the HIF shared memory according to the component ID and OP-code in the RQB. 
*
* @param [in] hSysDev           - system handle 
* @param [in] pHifPipeHandle    - pipe handle
* @param [in] hShmPool          - pool handle for the transfer memory
* @param [in] pRqbSrc           - pointer to the RQB that is serialized
* @param [out] ppRqbDest        - pointer to the serialized RQB in the HIF transfer memory
* @param [out] pSerRqbLen       - total length of the serialized RQB in the transfer memory
*
* @return HIF_OK                - success
* @return HIF_ERR_RESOURCE      - Not enough memory available in the transfer memory
*/
LSA_UINT16  hif_ioh_serialize_upper (
    HIF_SYS_HANDLE hSysDev,
    LSA_VOID*      pHifPipeHandle,
    LSA_INT        hShmPool,
    LSA_VOID*      pRqbSrc,
    LSA_VOID**     ppRqbDest,
    LSA_UINT32*    pSerRqbLen )
{
    LSA_UINT8* help_ptr = LSA_NULL;
    LSA_UINT32 rqb_size = 0;
    LSA_OPCODE_TYPE opcode;
    IOH_RQB_TYPE* ptr_rqb_src = (IOH_RQB_TYPE*)pRqbSrc;
    LSA_VOID** ptr_ptr_rqb_dest = ppRqbDest;
    LSA_UINT32 i=0;
    LSA_UNUSED_ARG(hSysDev);
    LSA_UNUSED_ARG(pHifPipeHandle);

    HIF_ASSERT(HIF_IS_NOT_NULL(ptr_rqb_src)); /*#5*/
    opcode=HIF_RQB_GET_OPCODE(ptr_rqb_src);

    if (opcode==IOH_OPC_OPEN_CHANNEL)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "channel" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.channel)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF_SYS_PATH_TYPE();            /* sys_path */
            rqb_size+=HIF_SER_SIZEOF(1);            /* hd_count */
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.channel);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.channel))  /*#9*/
        {
            HIF_SER_SYS_PATH_HTSHM((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.channel->sys_path);                        /* sys_path */
            HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.channel->hd_count);                        /* hd_count */
        }
    }
    else if (opcode==IOH_OPC_CLOSE_CHANNEL)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "channel" pointer itself */
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.channel);        /* pointer info itself */
    }
    else if  ((opcode==IOH_OPC_JOB_CREATE)
            ||(opcode==IOH_OPC_JOB_CHANGE)
            ||(opcode==IOH_OPC_JOB_REPLACE)
            ||(opcode==IOH_OPC_CONSUMER_JOB_CREATE)
            ||(opcode==IOH_OPC_PROVIDER_JOB_CREATE))
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "job_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_array)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_jobs */
            for(i=0;i<ptr_rqb_src->args.u.job_array->number_of_jobs;i++)            /* job_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(2);                /* flags */
                rqb_size+=HIF_SER_SIZEOF(2);                /* cycle_ms */
                rqb_size+=HIF_SER_SIZEOF(1);                /* IntSrc */
                rqb_size+=HIF_SER_SIZEOF(2);                /* CACF */
                rqb_size+=HIF_SER_SIZEOF(2);                /* ReductionRatio */
                rqb_size+=HIF_SER_SIZEOF(4);                /* Tm_ns */
                rqb_size+=HIF_SER_SIZEOF(4);                /* Te_ns */
                rqb_size+=HIF_SER_SIZEOF(4);                /* Tk_ns */
                rqb_size+=HIF_SER_SIZEOF(2);                /* type */
                rqb_size+=HIF_SER_SIZEOF(1);                /* width */
                rqb_size+=HIF_SER_SIZEOF(4);                /* offset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
                rqb_size+=HIF_SER_SIZEOF(1);                /* width */
                rqb_size+=HIF_SER_SIZEOF(4);                /* offset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
                rqb_size+=HIF_SER_SIZEOF(4);                /* len */
                rqb_size+=HIF_SER_SIZEOF(1);                /* width */
                rqb_size+=HIF_SER_SIZEOF(4);                /* offset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
                rqb_size+=HIF_SER_SIZEOF(1);                /* cnt_bits */
                rqb_size+=HIF_SER_SIZEOF(4);                /* start_value */
                rqb_size+=HIF_SER_SIZEOF(1);                /* width */
                rqb_size+=HIF_SER_SIZEOF(4);                /* offset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
                rqb_size+=HIF_SER_SIZEOF(4);                /* start_value */
                rqb_size+=HIF_SER_SIZEOF(4);                /* end_value */
                rqb_size+=HIF_SER_SIZEOF(4);                /* inc_value */
                rqb_size+=HIF_SER_SIZEOF(4);                /* iodata_len */
                rqb_size+=HIF_SER_SIZEOF(1);                /* width */
                rqb_size+=HIF_SER_SIZEOF(4);                /* offset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
                rqb_size+=HIF_SER_SIZEOF(1);                /* width */
                rqb_size+=HIF_SER_SIZEOF(4);                /* offset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
                rqb_size+=HIF_SER_SIZEOF(4);                /* length */
                rqb_size+=HIF_SER_SIZEOF(4);                /* serialize "check_data" pointer itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.check_data /* #8*/))
                {
                    rqb_size+=HIF_SER_SIZEOF_BUF(ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.length);                /* size of: check_data */
                }
                rqb_size+=HIF_SER_SIZEOF(1);                /* width */
                rqb_size+=HIF_SER_SIZEOF(4);                /* offset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
                rqb_size+=HIF_SER_SIZEOF(4);                /* iodata_len */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_array))  /*#9*/
        {
            /* INFO: serialize the array size right after the pointer */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->number_of_jobs);                        /* number_of_jobs */
            for(i=0;i<ptr_rqb_src->args.u.job_array->number_of_jobs;i++)                                                /* job_array*/
            {
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].attributes.flags);                                /* flags */
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].attributes.pars.timer.cycle_ms);                                /* cycle_ms */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].attributes.pars.isochronous.IntSrc);                                /* IntSrc */
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].attributes.pars.isochronous.CACF);                                /* CACF */
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].attributes.pars.isochronous.ReductionRatio);                                /* ReductionRatio */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].attributes.pars.isochronous.Tm_ns);                                /* Tm_ns */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].attributes.pars.isochronous.Te_ns);                                /* Te_ns */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].attributes.pars.isochronous.Tk_ns);                                /* Tk_ns */
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.type);                                /* type */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.copy_par.src.width);                                /* width */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.copy_par.src.offset);                                /* offset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.copy_par.src.buffer_handle);                                /* buffer_handle */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.copy_par.dst.width);                                /* width */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.copy_par.dst.offset);                                /* offset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.copy_par.dst.buffer_handle);                                /* buffer_handle */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.copy_par.len);                                /* len */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.shift_par.address.width);                                /* width */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.shift_par.address.offset);                                /* offset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.shift_par.address.buffer_handle);                                /* buffer_handle */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.shift_par.cnt_bits);                                /* cnt_bits */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.shift_par.start_value);                                /* start_value */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.inc_par.address.width);                                /* width */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.inc_par.address.offset);                                /* offset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.inc_par.address.buffer_handle);                                /* buffer_handle */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.inc_par.start_value);                                /* start_value */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.inc_par.end_value);                                /* end_value */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.inc_par.inc_value);                                /* inc_value */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.inc_par.iodata_len);                                /* iodata_len */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.src.width);                                /* width */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.src.offset);                                /* offset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.src.buffer_handle);                                /* buffer_handle */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.check.width);                                /* width */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.check.offset);                                /* offset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.check.buffer_handle);                                /* buffer_handle */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.length);                                /* length */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.check_data);                /* pointer info itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.check_data /*#11*/))
                {
                    HIF_SER_COPY_HTSHM_BUFFER(&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.check_data,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.length, hSysDev);                /* check_data */
                }
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.consistency_check_par.address.width);                                /* width */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.consistency_check_par.address.offset);                                /* offset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.consistency_check_par.address.buffer_handle);                                /* buffer_handle */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.consistency_check_par.iodata_len);                                /* iodata_len */
            }
        }
    }
    else if (opcode==IOH_OPC_JOB_DELETE)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "job_handle_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_handle_array)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_handle */
            for(i=0;i<ptr_rqb_src->args.u.job_handle_array->number_of_handle;i++)            /* handle_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(4);                /* handle */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_handle_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_handle_array))  /*#9*/
        {
            /* INFO: serialize the array size right after the pointer */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_handle_array->number_of_handle);                        /* number_of_handle */
            for(i=0;i<ptr_rqb_src->args.u.job_handle_array->number_of_handle;i++)                                                /* handle_array*/
            {
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_handle_array->handle_array[i].handle);                                /* handle */
            }
        }
    }
    else if (opcode==IOH_OPC_JOB_INFO_IND)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "job_info_ind" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_info_ind)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* handle */
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_info_ind);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_info_ind))  /*#9*/
        {
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_info_ind->handle);                        /* handle */
        }
    }
    else if (opcode==IOH_OPC_MEM_READ)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "mem_read_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_read_array)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_mem_read */
            for(i=0;i<ptr_rqb_src->args.u.mem_read_array->number_of_mem_read;i++)            /* mem_read_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(4);                /* len */
                rqb_size+=HIF_SER_SIZEOF(4);                /* src_offset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* serialize "dst" pointer itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].dst /* #8*/))
                {
                    rqb_size+=HIF_SER_SIZEOF_BUF(ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].len);                /* size of: dst */
                }
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_read_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_read_array))  /*#9*/
        {
            /* INFO: serialize the array size right after the pointer */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_read_array->number_of_mem_read);                        /* number_of_mem_read */
            for(i=0;i<ptr_rqb_src->args.u.mem_read_array->number_of_mem_read;i++)                                                /* mem_read_array*/
            {
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].len);                                /* len */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].src_offset);                                /* src_offset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].dst);                /* pointer info itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].dst /*#11*/))
                {
                    HIF_SER_COPY_HTSHM_BUFFER(&help_ptr,ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].dst,ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].len, hSysDev);                /* dst */
                }
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].buffer_handle);                                /* buffer_handle */
            }
        }
    }
    else if (opcode==IOH_OPC_MEM_WRITE)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "mem_write_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_array)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_mem_write */
            for(i=0;i<ptr_rqb_src->args.u.mem_write_array->number_of_mem_write;i++)            /* mem_write_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(4);                /* len */
                rqb_size+=HIF_SER_SIZEOF(4);                /* serialize "src" pointer itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_array->mem_write_array[i].src /* #8*/))
                {
                    rqb_size+=HIF_SER_SIZEOF_BUF(ptr_rqb_src->args.u.mem_write_array->mem_write_array[i].len);                /* size of: src */
                }
                rqb_size+=HIF_SER_SIZEOF(4);                /* dst_offset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_array))  /*#9*/
        {
            /* INFO: serialize the array size right after the pointer */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_array->number_of_mem_write);                        /* number_of_mem_write */
            for(i=0;i<ptr_rqb_src->args.u.mem_write_array->number_of_mem_write;i++)                                                /* mem_write_array*/
            {
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_array->mem_write_array[i].len);                                /* len */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_array->mem_write_array[i].src);                /* pointer info itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_array->mem_write_array[i].src /*#11*/))
                {
                    HIF_SER_COPY_HTSHM_BUFFER(&help_ptr,ptr_rqb_src->args.u.mem_write_array->mem_write_array[i].src,ptr_rqb_src->args.u.mem_write_array->mem_write_array[i].len, hSysDev);                /* src */
                }
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_array->mem_write_array[i].dst_offset);                                /* dst_offset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_array->mem_write_array[i].buffer_handle);                                /* buffer_handle */
            }
        }
    }
    else if (opcode==IOH_OPC_MEM_WRITE_IOXS)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "mem_write_ioxs" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_ioxs)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* buffer_handle */
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_ioxs */
            for(i=0;i<ptr_rqb_src->args.u.mem_write_ioxs->number_of_ioxs;i++)            /* ioxs_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(1);                /* ioxs */
                rqb_size+=HIF_SER_SIZEOF(4);                /* offset */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_ioxs);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_ioxs))  /*#9*/
        {
            /* INFO: serialize the array size right after the pointer */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_ioxs->number_of_ioxs);                        /* number_of_ioxs */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_ioxs->buffer_handle);                        /* buffer_handle */
            for(i=0;i<ptr_rqb_src->args.u.mem_write_ioxs->number_of_ioxs;i++)                                                /* ioxs_array*/
            {
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_ioxs->ioxs_array[i].ioxs);                                /* ioxs */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_ioxs->ioxs_array[i].offset);                                /* offset */
            }
        }
    }
    else if (opcode==IOH_OPC_JOB_START)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "job_start_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_start_array)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_jobs */
            for(i=0;i<ptr_rqb_src->args.u.job_start_array->number_of_jobs;i++)            /* start_job*/
            {
                rqb_size+=HIF_SER_SIZEOF(4);                /* handle */
                rqb_size+=HIF_SER_SIZEOF(4);                /* start_value */
                rqb_size+=HIF_SER_SIZEOF(4);                /* init_data_length */
                rqb_size+=HIF_SER_SIZEOF(4);                /* serialize "init_data" pointer itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_start_array->start_job[i].init_data /* #8*/))
                {
                    rqb_size+=HIF_SER_SIZEOF_BUF(ptr_rqb_src->args.u.job_start_array->start_job[i].init_data_length);                /* size of: init_data */
                }
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_start_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_start_array))  /*#9*/
        {
            /* INFO: serialize the array size right after the pointer */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_start_array->number_of_jobs);                        /* number_of_jobs */
            for(i=0;i<ptr_rqb_src->args.u.job_start_array->number_of_jobs;i++)                                                /* start_job*/
            {
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_start_array->start_job[i].handle);                                /* handle */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_start_array->start_job[i].start_value);                                /* start_value */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_start_array->start_job[i].init_data_length);                                /* init_data_length */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_start_array->start_job[i].init_data);                /* pointer info itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_start_array->start_job[i].init_data /*#11*/))
                {
                    HIF_SER_COPY_HTSHM_BUFFER(&help_ptr,ptr_rqb_src->args.u.job_start_array->start_job[i].init_data,ptr_rqb_src->args.u.job_start_array->start_job[i].init_data_length, hSysDev);                /* init_data */
                }
            }
        }
    }
    else if (opcode==IOH_OPC_JOB_STOP)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "job_stop_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_stop_array)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_jobs */
            for(i=0;i<ptr_rqb_src->args.u.job_stop_array->number_of_jobs;i++)            /* stop_job*/
            {
                rqb_size+=HIF_SER_SIZEOF(4);                /* handle */
                rqb_size+=HIF_SER_SIZEOF(4);                /* current_data_length */
                rqb_size+=HIF_SER_SIZEOF(4);                /* serialize "current_data" pointer itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data /* #8*/))
                {
                    rqb_size+=HIF_SER_SIZEOF_BUF(ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data_length);                /* size of: current_data */
                }
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_stop_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_stop_array))  /*#9*/
        {
            /* INFO: serialize the array size right after the pointer */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_stop_array->number_of_jobs);                        /* number_of_jobs */
            for(i=0;i<ptr_rqb_src->args.u.job_stop_array->number_of_jobs;i++)                                                /* stop_job*/
            {
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_stop_array->stop_job[i].handle);                                /* handle */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data_length);                                /* current_data_length */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data);                /* pointer info itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data /*#11*/))
                {
                    HIF_SER_COPY_HTSHM_BUFFER(&help_ptr,ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data,ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data_length, hSysDev);                /* current_data */
                }
            }
        }
    }
    else if (opcode==IOH_OPC_PI_ALLOC)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "pi_alloc_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.pi_alloc_array)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_pi_alloc */
            for(i=0;i<ptr_rqb_src->args.u.pi_alloc_array->number_of_pi_alloc;i++)            /* pi_alloc_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(1);                /* init_value */
                rqb_size+=HIF_SER_SIZEOF(1);                /* is_provider */
                rqb_size+=HIF_SER_SIZEOF(1);                /* is_dfp */
                rqb_size+=HIF_SER_SIZEOF(1);                /* is_device */
                rqb_size+=HIF_SER_SIZEOF(4);                /* partial_length */
                rqb_size+=HIF_SER_SIZEOF(4);                /* partial_offset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* apdu_status_length */
                rqb_size+=HIF_SER_SIZEOF(2);                /* prov_type */
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
                rqb_size+=HIF_SER_SIZEOF(4);                /* edd_cr_number */
                rqb_size+=HIF_SER_SIZEOF(4);                /* edd_properties */
                rqb_size+=HIF_SER_SIZEOF(4);                /* edd_data_offset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* edd_forward_mode */
                rqb_size+=HIF_SER_SIZEOF(4);                /* edd_ct_outdatastart */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.pi_alloc_array))  /*#9*/
        {
            /* INFO: serialize the array size right after the pointer */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->number_of_pi_alloc);                        /* number_of_pi_alloc */
            for(i=0;i<ptr_rqb_src->args.u.pi_alloc_array->number_of_pi_alloc;i++)                                                /* pi_alloc_array*/
            {
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].init_value);                                /* init_value */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].is_provider);                                /* is_provider */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].is_dfp);                                /* is_dfp */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].is_device);                                /* is_device */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].partial_length);                                /* partial_length */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].partial_offset);                                /* partial_offset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].apdu_status_length);                                /* apdu_status_length */
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].prov_type);                                /* prov_type */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].buffer_handle);                                /* buffer_handle */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].edd_cr_number);                                /* edd_cr_number */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].edd_properties);                                /* edd_properties */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].edd_data_offset);                                /* edd_data_offset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].edd_forward_mode);                                /* edd_forward_mode */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].edd_ct_outdatastart);                                /* edd_ct_outdatastart */
            }
        }
    }
    else if (opcode==IOH_OPC_PI_FREE)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "pi_free_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.pi_free_array)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_pi_free */
            for(i=0;i<ptr_rqb_src->args.u.pi_free_array->number_of_pi_free;i++)            /* pi_free_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_free_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.pi_free_array))  /*#9*/
        {
            /* INFO: serialize the array size right after the pointer */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_free_array->number_of_pi_free);                        /* number_of_pi_free */
            for(i=0;i<ptr_rqb_src->args.u.pi_free_array->number_of_pi_free;i++)                                                /* pi_free_array*/
            {
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_free_array->pi_free_array[i].buffer_handle);                                /* buffer_handle */
            }
        }
    }
    else if (opcode==IOH_OPC_UPDATE_IO_PARAMS)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "update_io_params_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.update_io_params_array)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_update_io_params */
            for(i=0;i<ptr_rqb_src->args.u.update_io_params_array->number_of_update_io_params;i++)            /* update_io_params_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(4);                /* CWOffset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* DataStatusOffset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* APDUStatusOffset */
                rqb_size+=HIF_SER_SIZEOF(1);                /* GroupID */
                rqb_size+=HIF_SER_SIZEOF(2);                /* ARSetID */
                rqb_size+=HIF_SER_SIZEOF(2);                /* PrimaryARID */
                rqb_size+=HIF_SER_SIZEOF(1);                /* ProvType */
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.update_io_params_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.update_io_params_array))  /*#9*/
        {
            /* INFO: serialize the array size right after the pointer */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.update_io_params_array->number_of_update_io_params);                        /* number_of_update_io_params */
            for(i=0;i<ptr_rqb_src->args.u.update_io_params_array->number_of_update_io_params;i++)                                                /* update_io_params_array*/
            {
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.update_io_params_array->update_io_params_array[i].CWOffset);                                /* CWOffset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.update_io_params_array->update_io_params_array[i].DataStatusOffset);                                /* DataStatusOffset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.update_io_params_array->update_io_params_array[i].APDUStatusOffset);                                /* APDUStatusOffset */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.update_io_params_array->update_io_params_array[i].GroupID);                                /* GroupID */
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.update_io_params_array->update_io_params_array[i].ARSetID);                                /* ARSetID */
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.update_io_params_array->update_io_params_array[i].PrimaryARID);                                /* PrimaryARID */
                HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.update_io_params_array->update_io_params_array[i].ProvType);                                /* ProvType */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.update_io_params_array->update_io_params_array[i].buffer_handle);                                /* buffer_handle */
            }
        }
    }
    else if (opcode==IOH_OPC_SET_DS)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "set_ds" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.set_ds)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(2);            /* primary_ar_id */
            rqb_size+=HIF_SER_SIZEOF(2);            /* ar_set_id */
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_set_ds */
            for(i=0;i<ptr_rqb_src->args.u.set_ds->number_of_set_ds;i++)            /* set_ds_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(4);                /* set_ds_cmd */
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.set_ds);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.set_ds))  /*#9*/
        {
            /* INFO: serialize the array size right after the pointer */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.set_ds->number_of_set_ds);                        /* number_of_set_ds */
            HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.set_ds->primary_ar_id);                        /* primary_ar_id */
            HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.set_ds->ar_set_id);                        /* ar_set_id */
            for(i=0;i<ptr_rqb_src->args.u.set_ds->number_of_set_ds;i++)                                                /* set_ds_array*/
            {
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.set_ds->set_ds_array[i].set_ds_cmd);                                /* set_ds_cmd */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.set_ds->set_ds_array[i].buffer_handle);                                /* buffer_handle */
            }
        }
    }
    else if (opcode==IOH_OPC_CONSUMER_IND_PROVIDE)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "consumer_ind" pointer itself */
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.consumer_ind);        /* pointer info itself */
    }
    else if (opcode==IOH_OPC_COPY_PROVIDER_UPDATE)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF(1);        /* hd_nr */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "provider_update" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.provider_update)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* handle */
            rqb_size+=HIF_SER_SIZEOF(4);            /* provider_data */
            rqb_size+=HIF_SER_SIZEOF(4);            /* provider_data_length */
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_upper() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src);                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_COPY_HTSHM_8((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.hd_nr);                /* hd_nr */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.provider_update);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.provider_update))  /*#9*/
        {
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.provider_update->handle);                        /* handle */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.provider_update->provider_data);                        /* provider_data */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.provider_update->provider_data_length);                        /* provider_data_length */
        }
    }
    else
    {
        HIF_PROGRAM_TRACE_02(0,LSA_TRACE_LEVEL_FATAL,"hif_ioh_serialize_upper(). RQB-Opcode:0x%x is not valid! pRQB(0x%08x)",opcode,ptr_rqb_src+4);
        HIF_FATAL(0);
    }

    *pSerRqbLen = rqb_size;

    HIF_ASSERT(HIF_IS_NOT_NULL(help_ptr)); /*#4*/

    /* Check for overwrite */
    HIF_SHM_CHECK_OVERWRITE_SERIALIZE(opcode, *ptr_ptr_rqb_dest, rqb_size, help_ptr, "hif_ioh_serialize_upper");

    return HIF_OK;
}

/**
* \brief Function serializes the RQB to the HIF shared memory according to the component ID and OP-code in the RQB. 
*
* @param [in] hSysDev           - system handle 
* @param [in] pHifPipeHandle    - pipe handle
* @param [in] hShmPool          - pool handle for the transfer memory
* @param [in] pRqbSrc           - pointer to the RQB that is serialized
* @param [out] ppRqbDest        - pointer to the serialized RQB in the HIF transfer memory
* @param [out] pSerRqbLen       - total length of the serialized RQB in the transfer memory
*
* @return HIF_OK                - success
* @return HIF_ERR_RESOURCE      - Not enough memory available in the transfer memory
*/
LSA_UINT16  hif_ioh_serialize_lower (
    HIF_SYS_HANDLE hSysDev,
    LSA_VOID*      pHifPipeHandle,
    LSA_INT        hShmPool,
    LSA_VOID*      pRqbSrc,
    LSA_VOID**     ppRqbDest,
    LSA_UINT32*    pSerRqbLen )
{
    LSA_UINT8* help_ptr = LSA_NULL;
    LSA_UINT32 rqb_size = 0;
    LSA_OPCODE_TYPE opcode;
    IOH_RQB_TYPE* ptr_rqb_src = (IOH_RQB_TYPE*)pRqbSrc;
    LSA_VOID** ptr_ptr_rqb_dest = ppRqbDest;
    LSA_UINT16 freeRes;
    LSA_UINT32 i=0;
    LSA_UNUSED_ARG(hSysDev);
    LSA_UNUSED_ARG(pHifPipeHandle);

    HIF_ASSERT(HIF_IS_NOT_NULL(ptr_rqb_src)); /*#5*/
    opcode=HIF_RQB_GET_OPCODE(ptr_rqb_src);

    if (opcode==IOH_OPC_OPEN_CHANNEL)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.channel)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.channel, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_CLOSE_CHANNEL)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.channel)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.channel, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if  ((opcode==IOH_OPC_JOB_CREATE)
            ||(opcode==IOH_OPC_JOB_CHANGE)
            ||(opcode==IOH_OPC_JOB_REPLACE)
            ||(opcode==IOH_OPC_CONSUMER_JOB_CREATE)
            ||(opcode==IOH_OPC_PROVIDER_JOB_CREATE))
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "job_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_array)) /*#6*/
        {
            for(i=0;i<ptr_rqb_src->args.u.job_array->number_of_jobs;i++)            /* job_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(4);                /* handle */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_array))  /*#9*/
        {
            for(i=0;i<ptr_rqb_src->args.u.job_array->number_of_jobs;i++)                                                /* job_array*/
            {
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_array->job_array[i].handle);                                /* handle */
            }
        }

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_array)) /*#2*/
        {
            for(i=0;i<ptr_rqb_src->args.u.job_array->number_of_jobs;i++)        /* free pointer in array job_array*/
            {
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.check_data)) /*#13*/
                {
                    freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
                    HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.job_array->job_array[i].cmd.pars.check_par.check_data, LSA_COMP_ID_IOH, HIF_MEM_TYPE_BUFFER, hSysDev);
                    if (freeRes != LSA_RET_OK)
                    {
                        return HIF_ERR_RESOURCE;
                    }
                }
            }
        }
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_array)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.job_array, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_JOB_DELETE)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "job_handle_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_handle_array)) /*#6*/
        {
            for(i=0;i<ptr_rqb_src->args.u.job_handle_array->number_of_handle;i++)            /* handle_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(2);                /* response */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_handle_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_handle_array))  /*#9*/
        {
            for(i=0;i<ptr_rqb_src->args.u.job_handle_array->number_of_handle;i++)                                                /* handle_array*/
            {
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_handle_array->handle_array[i].response);                                /* response */
            }
        }

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_handle_array)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.job_handle_array, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_JOB_INFO_IND)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "job_info_ind" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_info_ind)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(2);            /* old_state */
            rqb_size+=HIF_SER_SIZEOF(2);            /* new_state */
            rqb_size+=HIF_SER_SIZEOF(2);            /* reason */
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_info_ind);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_info_ind))  /*#9*/
        {
            HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_info_ind->old_state);                        /* old_state */
            HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_info_ind->new_state);                        /* new_state */
            HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_info_ind->reason);                        /* reason */
        }

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_info_ind)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.job_info_ind, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_MEM_READ)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "mem_read_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_read_array)) /*#6*/
        {
            for(i=0;i<ptr_rqb_src->args.u.mem_read_array->number_of_mem_read;i++)            /* mem_read_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(4);                /* len */
                rqb_size+=HIF_SER_SIZEOF(4);                /* serialize "dst" pointer itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].dst /* #8*/))
                {
                    rqb_size+=HIF_SER_SIZEOF_BUF(ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].len);                /* size of: dst */
                }
                rqb_size+=HIF_SER_SIZEOF(2);                /* response */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_read_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_read_array))  /*#9*/
        {
            for(i=0;i<ptr_rqb_src->args.u.mem_read_array->number_of_mem_read;i++)                                                /* mem_read_array*/
            {
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].len);                                /* len */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].dst);                /* pointer info itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].dst /*#11*/))
                {
                    HIF_SER_COPY_HTSHM_BUFFER(&help_ptr,ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].dst,ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].len, hSysDev);                /* dst */
                }
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].response);                                /* response */
            }
        }

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_read_array)) /*#2*/
        {
            for(i=0;i<ptr_rqb_src->args.u.mem_read_array->number_of_mem_read;i++)        /* free pointer in array mem_read_array*/
            {
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].dst)) /*#13*/
                {
                    freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
                    HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.mem_read_array->mem_read_array[i].dst, LSA_COMP_ID_IOH, HIF_MEM_TYPE_BUFFER, hSysDev);
                    if (freeRes != LSA_RET_OK)
                    {
                        return HIF_ERR_RESOURCE;
                    }
                }
            }
        }
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_read_array)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.mem_read_array, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_MEM_WRITE)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "mem_write_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_array)) /*#6*/
        {
            for(i=0;i<ptr_rqb_src->args.u.mem_write_array->number_of_mem_write;i++)            /* mem_write_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(2);                /* response */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_array))  /*#9*/
        {
            for(i=0;i<ptr_rqb_src->args.u.mem_write_array->number_of_mem_write;i++)                                                /* mem_write_array*/
            {
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_array->mem_write_array[i].response);                                /* response */
            }
        }

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_array)) /*#2*/
        {
            for(i=0;i<ptr_rqb_src->args.u.mem_write_array->number_of_mem_write;i++)        /* free pointer in array mem_write_array*/
            {
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_array->mem_write_array[i].src)) /*#13*/
                {
                    freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
                    HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.mem_write_array->mem_write_array[i].src, LSA_COMP_ID_IOH, HIF_MEM_TYPE_BUFFER, hSysDev);
                    if (freeRes != LSA_RET_OK)
                    {
                        return HIF_ERR_RESOURCE;
                    }
                }
            }
        }
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_array)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.mem_write_array, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_MEM_WRITE_IOXS)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "mem_write_ioxs" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_ioxs)) /*#6*/
        {
            for(i=0;i<ptr_rqb_src->args.u.mem_write_ioxs->number_of_ioxs;i++)            /* ioxs_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(2);                /* response */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_ioxs);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_ioxs))  /*#9*/
        {
            for(i=0;i<ptr_rqb_src->args.u.mem_write_ioxs->number_of_ioxs;i++)                                                /* ioxs_array*/
            {
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.mem_write_ioxs->ioxs_array[i].response);                                /* response */
            }
        }

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.mem_write_ioxs)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.mem_write_ioxs, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_JOB_START)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "job_start_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_start_array)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_jobs */
            for(i=0;i<ptr_rqb_src->args.u.job_start_array->number_of_jobs;i++)            /* start_job*/
            {
                rqb_size+=HIF_SER_SIZEOF(2);                /* response */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_start_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_start_array))  /*#9*/
        {
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_start_array->number_of_jobs);                        /* number_of_jobs */
            for(i=0;i<ptr_rqb_src->args.u.job_start_array->number_of_jobs;i++)                                                /* start_job*/
            {
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_start_array->start_job[i].response);                                /* response */
            }
        }

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_start_array)) /*#2*/
        {
            for(i=0;i<ptr_rqb_src->args.u.job_start_array->number_of_jobs;i++)        /* free pointer in array start_job*/
            {
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_start_array->start_job[i].init_data)) /*#13*/
                {
                    freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
                    HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.job_start_array->start_job[i].init_data, LSA_COMP_ID_IOH, HIF_MEM_TYPE_BUFFER, hSysDev);
                    if (freeRes != LSA_RET_OK)
                    {
                        return HIF_ERR_RESOURCE;
                    }
                }
            }
        }
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_start_array)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.job_start_array, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_JOB_STOP)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "job_stop_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_stop_array)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* number_of_jobs */
            for(i=0;i<ptr_rqb_src->args.u.job_stop_array->number_of_jobs;i++)            /* stop_job*/
            {
                rqb_size+=HIF_SER_SIZEOF(2);                /* response */
                rqb_size+=HIF_SER_SIZEOF(4);                /* current_value */
                rqb_size+=HIF_SER_SIZEOF(4);                /* current_data_length */
                rqb_size+=HIF_SER_SIZEOF(4);                /* serialize "current_data" pointer itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data /* #8*/))
                {
                    rqb_size+=HIF_SER_SIZEOF_BUF(ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data_length);                /* size of: current_data */
                }
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_stop_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_stop_array))  /*#9*/
        {
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_stop_array->number_of_jobs);                        /* number_of_jobs */
            for(i=0;i<ptr_rqb_src->args.u.job_stop_array->number_of_jobs;i++)                                                /* stop_job*/
            {
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_stop_array->stop_job[i].response);                                /* response */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_value);                                /* current_value */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data_length);                                /* current_data_length */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data);                /* pointer info itself */
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data /*#11*/))
                {
                    HIF_SER_COPY_HTSHM_BUFFER(&help_ptr,ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data,ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data_length, hSysDev);                /* current_data */
                }
            }
        }

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_stop_array)) /*#2*/
        {
            for(i=0;i<ptr_rqb_src->args.u.job_stop_array->number_of_jobs;i++)        /* free pointer in array stop_job*/
            {
                if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data)) /*#13*/
                {
                    freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
                    HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.job_stop_array->stop_job[i].current_data, LSA_COMP_ID_IOH, HIF_MEM_TYPE_BUFFER, hSysDev);
                    if (freeRes != LSA_RET_OK)
                    {
                        return HIF_ERR_RESOURCE;
                    }
                }
            }
        }
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.job_stop_array)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.job_stop_array, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_PI_ALLOC)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "pi_alloc_array" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.pi_alloc_array)) /*#6*/
        {
            for(i=0;i<ptr_rqb_src->args.u.pi_alloc_array->number_of_pi_alloc;i++)            /* pi_alloc_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(4);                /* buffer_handle */
                rqb_size+=HIF_SER_SIZEOF(4);                /* edd_cr_number */
                rqb_size+=HIF_SER_SIZEOF(4);                /* edd_properties */
                rqb_size+=HIF_SER_SIZEOF(4);                /* edd_data_offset */
                rqb_size+=HIF_SER_SIZEOF(4);                /* edd_forward_mode */
                rqb_size+=HIF_SER_SIZEOF(4);                /* edd_ct_outdatastart */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.pi_alloc_array))  /*#9*/
        {
            for(i=0;i<ptr_rqb_src->args.u.pi_alloc_array->number_of_pi_alloc;i++)                                                /* pi_alloc_array*/
            {
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].buffer_handle);                                /* buffer_handle */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].edd_cr_number);                                /* edd_cr_number */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].edd_properties);                                /* edd_properties */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].edd_data_offset);                                /* edd_data_offset */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].edd_forward_mode);                                /* edd_forward_mode */
                HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.pi_alloc_array->pi_alloc_array[i].edd_ct_outdatastart);                                /* edd_ct_outdatastart */
            }
        }

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.pi_alloc_array)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.pi_alloc_array, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_PI_FREE)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.pi_free_array)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.pi_free_array, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_UPDATE_IO_PARAMS)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.update_io_params_array)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.update_io_params_array, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_SET_DS)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "set_ds" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.set_ds)) /*#6*/
        {
            for(i=0;i<ptr_rqb_src->args.u.set_ds->number_of_set_ds;i++)            /* set_ds_array*/
            {
                rqb_size+=HIF_SER_SIZEOF(2);                /* response */
            }
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.set_ds);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.set_ds))  /*#9*/
        {
            for(i=0;i<ptr_rqb_src->args.u.set_ds->number_of_set_ds;i++)                                                /* set_ds_array*/
            {
                HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.set_ds->set_ds_array[i].response);                                /* response */
            }
        }

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.set_ds)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.set_ds, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_CONSUMER_IND_PROVIDE)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "consumer_ind" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.consumer_ind)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(4);            /* handle */
            rqb_size+=HIF_SER_SIZEOF(4);            /* uvar32 */
            rqb_size+=HIF_SER_SIZEOF(4);            /* current_data */
            rqb_size+=HIF_SER_SIZEOF(4);            /* current_data_length */
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.consumer_ind);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.consumer_ind))  /*#9*/
        {
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.consumer_ind->handle);                        /* handle */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.consumer_ind->handle_upper.uvar32);                        /* uvar32 */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.consumer_ind->current_data);                        /* current_data */
            HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.consumer_ind->current_data_length);                        /* current_data_length */
        }

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.consumer_ind)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.consumer_ind, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else if (opcode==IOH_OPC_COPY_PROVIDER_UPDATE)
    {
        rqb_size+=HIF_SER_SIZEOF(4);        /* original upper RQB pointer */
        rqb_size+=HIF_SER_SIZEOF_OPCODE_TYPE();        /* _opcode */
        rqb_size+=HIF_SER_SIZEOF_RESPONSE_TYPE();        /* _response */
        rqb_size+=HIF_SER_SIZEOF(4);        /* "provider_update" pointer itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.provider_update)) /*#6*/
        {
            rqb_size+=HIF_SER_SIZEOF(2);            /* response */
        }
        help_ptr = hif_mem_ring_pool_alloc(rqb_size, hShmPool);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_serialize_lower() opc(%d) rqb_size_shm(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,ptr_rqb_src);

        if (HIF_IS_NULL(help_ptr))
        {
            return HIF_ERR_RESOURCE;
        }

        *ptr_ptr_rqb_dest = help_ptr;
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,*((LSA_UINT32*)ptr_rqb_src-1));                /* original upper RQB pointer */

        HIF_SER_OPCODE_HTSHM((LSA_UINT32**)&help_ptr,opcode);                /* _opcode */
        HIF_SER_RESPONSE_HTSHM((LSA_UINT32**)&help_ptr,HIF_RQB_GET_RESPONSE(ptr_rqb_src));                /* _response */
        HIF_SER_COPY_HTSHM_32((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.provider_update);        /* pointer info itself */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.provider_update))  /*#9*/
        {
            HIF_SER_COPY_HTSHM_16((LSA_UINT32**)&help_ptr,ptr_rqb_src->args.u.provider_update->response);                        /* response */
        }

        /* Delete lower RQB after lower serialization */
        if (HIF_IS_NOT_NULL(ptr_rqb_src->args.u.provider_update)) /*#14*/
        {
            freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
            HIF_FREE_LOCAL_MEMORY(&freeRes, ptr_rqb_src->args.u.provider_update, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
            if (freeRes != LSA_RET_OK)
            {
                return HIF_ERR_RESOURCE;
            }
        }
        freeRes = LSA_RET_ERR_RESOURCE; /* preset negative */
        HIF_FREE_LOCAL_MEMORY(&freeRes, (LSA_UINT8*)ptr_rqb_src-HIF_SER_SIZEOF(4), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        if (freeRes != LSA_RET_OK)
        {
            return HIF_ERR_RESOURCE;
        }
    }
    else
    {
        HIF_PROGRAM_TRACE_02(0,LSA_TRACE_LEVEL_FATAL,"hif_ioh_serialize_lower(). RQB-Opcode:0x%x is not valid! pRQB(0x%08x)",opcode,ptr_rqb_src+4);
        HIF_FATAL(0);
    }

    *pSerRqbLen = rqb_size;

    HIF_ASSERT(HIF_IS_NOT_NULL(help_ptr)); /*#4*/

    /* Check for overwrite */
    HIF_SHM_CHECK_OVERWRITE_SERIALIZE(opcode, *ptr_ptr_rqb_dest, rqb_size, help_ptr, "hif_ioh_serialize_lower");

    return HIF_OK;
}

/**
* \brief De-serializes the RQB from the HIF shared memory into the hosts local memory - according to the component ID and OP-code in the RQB.
*
* @param [in] hSysDev           - system handle 
* @param [in] pHifPipeHandle    - pipe handle
* @param [in] pRqbSrc           - pointer to the serialized RQB in the transfer memory
* @param [out] ppRqbDest        - pointer to the RQB deserialized in the hosts local memory
*
* @return HIF_OK                - success
* @return HIF_ERR_RESOURCE      - Not enough local memory
*/
LSA_UINT16      hif_ioh_deserialize_upper (
        HIF_SYS_HANDLE hSysDev,
        LSA_VOID* pHifPipeHandle,
        LSA_VOID* pRqbSrc,
        LSA_VOID** ppRqbDest )
{
    LSA_UINT8* help_ptr;
    IOH_RQB_TYPE* new_rqb;
    LSA_OPCODE_TYPE opcode;
    LSA_VOID* ptr_rqb_src = (LSA_VOID*)pRqbSrc;
    IOH_RQB_TYPE** ptr_ptr_rqb_dest = (IOH_RQB_TYPE**)ppRqbDest;
    LSA_RESPONSE_TYPE response = 0;
    LSA_UINT32 i=0;
    LSA_UNUSED_ARG(hSysDev);
    LSA_UNUSED_ARG(pHifPipeHandle);

    HIF_ASSERT(HIF_IS_NOT_NULL(ptr_ptr_rqb_dest)); /*#17*/
    HIF_ASSERT(HIF_IS_NOT_NULL(ptr_rqb_src));

    HIF_DESER_GET_OPCODE(ptr_rqb_src, opcode);

    help_ptr = (LSA_UINT8*)ptr_rqb_src + HIF_SER_SIZEOF(4);  /* start deserialization after the original upper RQB pointer */

    new_rqb = (IOH_RQB_TYPE*)hif_get_rqb_id(ptr_rqb_src); /* get orig. upper RQB */
    HIF_PROGRAM_TRACE_03(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_upper() opc(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,ptr_rqb_src,new_rqb+4);

    if (opcode==IOH_OPC_OPEN_CHANNEL)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

    }
    else if (opcode==IOH_OPC_CLOSE_CHANNEL)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

    }
    else if  ((opcode==IOH_OPC_JOB_CREATE)
            ||(opcode==IOH_OPC_JOB_CHANGE)
            ||(opcode==IOH_OPC_JOB_REPLACE)
            ||(opcode==IOH_OPC_CONSUMER_JOB_CREATE)
            ||(opcode==IOH_OPC_PROVIDER_JOB_CREATE))
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

        if (HIF_IS_NOT_NULL(new_rqb->args.u.job_array) && HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr)) /*#19*/
        {
            /* INFO: no need to deserialize hif-upper pointer: IOH_RQB_ARGS_JOB_ARRAY_PTR_TYPE */
            help_ptr+=HIF_SER_SIZEOF(4);
            for(i=0;i<new_rqb->args.u.job_array->number_of_jobs;i++)                                    /* job_array*/
            {
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].handle,(LSA_UINT32**)&help_ptr);                /* handle */
            }
        }
        else
        {
            new_rqb->args.u.job_array = LSA_NULL; /* Attention */
            help_ptr+=HIF_SER_SIZEOF(4);
        }
    }
    else if (opcode==IOH_OPC_JOB_DELETE)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

        if (HIF_IS_NOT_NULL(new_rqb->args.u.job_handle_array) && HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr)) /*#19*/
        {
            /* INFO: no need to deserialize hif-upper pointer: IOH_RQB_ARGS_JOB_HANDLE_ARRAY_PTR_TYPE */
            help_ptr+=HIF_SER_SIZEOF(4);
            for(i=0;i<new_rqb->args.u.job_handle_array->number_of_handle;i++)                                    /* handle_array*/
            {
                HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.job_handle_array->handle_array[i].response,(LSA_UINT32**)&help_ptr);                /* response */
            }
        }
        else
        {
            new_rqb->args.u.job_handle_array = LSA_NULL; /* Attention */
            help_ptr+=HIF_SER_SIZEOF(4);
        }
    }
    else if (opcode==IOH_OPC_JOB_INFO_IND)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

        if (HIF_IS_NOT_NULL(new_rqb->args.u.job_info_ind) && HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr)) /*#19*/
        {
            /* INFO: no need to deserialize hif-upper pointer: IOH_JOB_INFO_IND_PTR_TYPE */
            help_ptr+=HIF_SER_SIZEOF(4);
            HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.job_info_ind->old_state,(LSA_UINT32**)&help_ptr);            /* old_state */
            HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.job_info_ind->new_state,(LSA_UINT32**)&help_ptr);            /* new_state */
            HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.job_info_ind->reason,(LSA_UINT32**)&help_ptr);            /* reason */
        }
        else
        {
            new_rqb->args.u.job_info_ind = LSA_NULL; /* Attention */
            help_ptr+=HIF_SER_SIZEOF(4);
        }
    }
    else if (opcode==IOH_OPC_MEM_READ)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

        if (HIF_IS_NOT_NULL(new_rqb->args.u.mem_read_array) && HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr)) /*#19*/
        {
            /* INFO: no need to deserialize hif-upper pointer: IOH_RQB_ARGS_MEM_READ_ARRAY_PTR_TYPE */
            help_ptr+=HIF_SER_SIZEOF(4);
            for(i=0;i<new_rqb->args.u.mem_read_array->number_of_mem_read;i++)                                    /* mem_read_array*/
            {
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.mem_read_array->mem_read_array[i].len,(LSA_UINT32**)&help_ptr);                /* len */
                if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr) && new_rqb->args.u.mem_read_array->mem_read_array[i].len > 0 ) /*#22d*/
                {
                    help_ptr+=HIF_SER_SIZEOF(4); /* skip buffer-pointer */
                    if (HIF_IS_NOT_NULL(new_rqb->args.u.mem_read_array->mem_read_array[i].dst)) /*#24*/
                    {
                        HIF_SER_COPY_SHMTH_BUF(new_rqb->args.u.mem_read_array->mem_read_array[i].dst,&help_ptr,new_rqb->args.u.mem_read_array->mem_read_array[i].len);                /* dst */
                    }
                }
                else
                {
                    help_ptr+=HIF_SER_SIZEOF(4);          /* skip buffer-pointer */
                }
                HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.mem_read_array->mem_read_array[i].response,(LSA_UINT32**)&help_ptr);                /* response */
            }
        }
        else
        {
            new_rqb->args.u.mem_read_array = LSA_NULL; /* Attention */
            help_ptr+=HIF_SER_SIZEOF(4);
        }
    }
    else if (opcode==IOH_OPC_MEM_WRITE)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

        if (HIF_IS_NOT_NULL(new_rqb->args.u.mem_write_array) && HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr)) /*#19*/
        {
            /* INFO: no need to deserialize hif-upper pointer: IOH_RQB_ARGS_MEM_WRITE_ARRAY_PTR_TYPE */
            help_ptr+=HIF_SER_SIZEOF(4);
            for(i=0;i<new_rqb->args.u.mem_write_array->number_of_mem_write;i++)                                    /* mem_write_array*/
            {
                HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.mem_write_array->mem_write_array[i].response,(LSA_UINT32**)&help_ptr);                /* response */
            }
        }
        else
        {
            new_rqb->args.u.mem_write_array = LSA_NULL; /* Attention */
            help_ptr+=HIF_SER_SIZEOF(4);
        }
    }
    else if (opcode==IOH_OPC_MEM_WRITE_IOXS)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

        if (HIF_IS_NOT_NULL(new_rqb->args.u.mem_write_ioxs) && HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr)) /*#19*/
        {
            /* INFO: no need to deserialize hif-upper pointer: IOH_RQB_ARGS_MEM_WRITE_IOXS_PTR_TYPE */
            help_ptr+=HIF_SER_SIZEOF(4);
            for(i=0;i<new_rqb->args.u.mem_write_ioxs->number_of_ioxs;i++)                                    /* ioxs_array*/
            {
                HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.mem_write_ioxs->ioxs_array[i].response,(LSA_UINT32**)&help_ptr);                /* response */
            }
        }
        else
        {
            new_rqb->args.u.mem_write_ioxs = LSA_NULL; /* Attention */
            help_ptr+=HIF_SER_SIZEOF(4);
        }
    }
    else if (opcode==IOH_OPC_JOB_START)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

        if (HIF_IS_NOT_NULL(new_rqb->args.u.job_start_array) && HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr)) /*#19*/
        {
            /* INFO: no need to deserialize hif-upper pointer: IOH_RQB_ARGS_JOB_START_ARRAY_PTR_TYPE */
            help_ptr+=HIF_SER_SIZEOF(4);
            HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_start_array->number_of_jobs,(LSA_UINT32**)&help_ptr);            /* number_of_jobs */
            for(i=0;i<new_rqb->args.u.job_start_array->number_of_jobs;i++)                                    /* start_job*/
            {
                HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.job_start_array->start_job[i].response,(LSA_UINT32**)&help_ptr);                /* response */
            }
        }
        else
        {
            new_rqb->args.u.job_start_array = LSA_NULL; /* Attention */
            help_ptr+=HIF_SER_SIZEOF(4);
        }
    }
    else if (opcode==IOH_OPC_JOB_STOP)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

        if (HIF_IS_NOT_NULL(new_rqb->args.u.job_stop_array) && HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr)) /*#19*/
        {
            /* INFO: no need to deserialize hif-upper pointer: IOH_RQB_ARGS_JOB_STOP_ARRAY_PTR_TYPE */
            help_ptr+=HIF_SER_SIZEOF(4);
            HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_stop_array->number_of_jobs,(LSA_UINT32**)&help_ptr);            /* number_of_jobs */
            for(i=0;i<new_rqb->args.u.job_stop_array->number_of_jobs;i++)                                    /* stop_job*/
            {
                HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.job_stop_array->stop_job[i].response,(LSA_UINT32**)&help_ptr);                /* response */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_stop_array->stop_job[i].current_value,(LSA_UINT32**)&help_ptr);                /* current_value */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_stop_array->stop_job[i].current_data_length,(LSA_UINT32**)&help_ptr);                /* current_data_length */
                if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr) && new_rqb->args.u.job_stop_array->stop_job[i].current_data_length > 0 ) /*#22d*/
                {
                    help_ptr+=HIF_SER_SIZEOF(4); /* skip buffer-pointer */
                    if (HIF_IS_NOT_NULL(new_rqb->args.u.job_stop_array->stop_job[i].current_data)) /*#24*/
                    {
                        HIF_SER_COPY_SHMTH_BUF(new_rqb->args.u.job_stop_array->stop_job[i].current_data,&help_ptr,new_rqb->args.u.job_stop_array->stop_job[i].current_data_length);                /* current_data */
                    }
                }
                else
                {
                    help_ptr+=HIF_SER_SIZEOF(4);          /* skip buffer-pointer */
                }
            }
        }
        else
        {
            new_rqb->args.u.job_stop_array = LSA_NULL; /* Attention */
            help_ptr+=HIF_SER_SIZEOF(4);
        }
    }
    else if (opcode==IOH_OPC_PI_ALLOC)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

        if (HIF_IS_NOT_NULL(new_rqb->args.u.pi_alloc_array) && HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr)) /*#19*/
        {
            /* INFO: no need to deserialize hif-upper pointer: IOH_RQB_ARGS_PI_ALLOC_ARRAY_PTR_TYPE */
            help_ptr+=HIF_SER_SIZEOF(4);
            for(i=0;i<new_rqb->args.u.pi_alloc_array->number_of_pi_alloc;i++)                                    /* pi_alloc_array*/
            {
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].buffer_handle,(LSA_UINT32**)&help_ptr);                /* buffer_handle */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].edd_cr_number,(LSA_UINT32**)&help_ptr);                /* edd_cr_number */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].edd_properties,(LSA_UINT32**)&help_ptr);                /* edd_properties */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].edd_data_offset,(LSA_UINT32**)&help_ptr);                /* edd_data_offset */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].edd_forward_mode,(LSA_UINT32**)&help_ptr);                /* edd_forward_mode */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].edd_ct_outdatastart,(LSA_UINT32**)&help_ptr);                /* edd_ct_outdatastart */
            }
        }
        else
        {
            new_rqb->args.u.pi_alloc_array = LSA_NULL; /* Attention */
            help_ptr+=HIF_SER_SIZEOF(4);
        }
    }
    else if (opcode==IOH_OPC_PI_FREE)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

    }
    else if (opcode==IOH_OPC_UPDATE_IO_PARAMS)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

    }
    else if (opcode==IOH_OPC_SET_DS)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

        if (HIF_IS_NOT_NULL(new_rqb->args.u.set_ds) && HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr)) /*#19*/
        {
            /* INFO: no need to deserialize hif-upper pointer: IOH_RQB_ARGS_SET_DS_ARRAY_PTR_TYPE */
            help_ptr+=HIF_SER_SIZEOF(4);
            for(i=0;i<new_rqb->args.u.set_ds->number_of_set_ds;i++)                                    /* set_ds_array*/
            {
                HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.set_ds->set_ds_array[i].response,(LSA_UINT32**)&help_ptr);                /* response */
            }
        }
        else
        {
            new_rqb->args.u.set_ds = LSA_NULL; /* Attention */
            help_ptr+=HIF_SER_SIZEOF(4);
        }
    }
    else if (opcode==IOH_OPC_CONSUMER_IND_PROVIDE)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

        if (HIF_IS_NOT_NULL(new_rqb->args.u.consumer_ind) && HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr)) /*#19*/
        {
            /* INFO: no need to deserialize hif-upper pointer: IOH_RQB_ARGS_CONSUMER_IND_PTR_TYPE */
            help_ptr+=HIF_SER_SIZEOF(4);
            HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.consumer_ind->handle,(LSA_UINT32**)&help_ptr);            /* handle */
            HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.consumer_ind->handle_upper.uvar32,(LSA_UINT32**)&help_ptr);            /* uvar32 */
            HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.consumer_ind->current_data,(LSA_UINT32**)&help_ptr);            /* current_data */
            HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.consumer_ind->current_data_length,(LSA_UINT32**)&help_ptr);            /* current_data_length */
        }
        else
        {
            new_rqb->args.u.consumer_ind = LSA_NULL; /* Attention */
            help_ptr+=HIF_SER_SIZEOF(4);
        }
    }
    else if (opcode==IOH_OPC_COPY_PROVIDER_UPDATE)
    {

        /* restore the Upper RQB */
        HIF_RQB_SET_OPCODE(new_rqb,opcode);                /* _opcode */
        help_ptr+=4;                /* skip opcode on shared-mem */
        HIF_SER_RESPONSE_SHMTH(&response,(LSA_UINT32**)&help_ptr);                /* _response */
        HIF_RQB_SET_RESPONSE(new_rqb,response);                                /* _response */

        if (HIF_IS_NOT_NULL(new_rqb->args.u.provider_update) && HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr)) /*#19*/
        {
            /* INFO: no need to deserialize hif-upper pointer: IOH_RQB_ARGS_COPY_PROV_UPDATE_PTR_TYPE */
            help_ptr+=HIF_SER_SIZEOF(4);
            HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.provider_update->response,(LSA_UINT32**)&help_ptr);            /* response */
        }
        else
        {
            new_rqb->args.u.provider_update = LSA_NULL; /* Attention */
            help_ptr+=HIF_SER_SIZEOF(4);
        }
    }
    else
    {
        HIF_PROGRAM_TRACE_02(0,LSA_TRACE_LEVEL_FATAL,"hif_ioh_deserialize_upper(). RQB-Opcode:0x%x is not valid! shm_addr(0x%08x)", opcode, ptr_rqb_src);
        HIF_FATAL(0);
    }
    *ptr_ptr_rqb_dest = new_rqb;

    /* Check for overwrite */
    HIF_SHM_CHECK_OVERWRITE_DESERIALIZE(ptr_rqb_src, opcode, help_ptr, "hif_ioh_deserialize_upper");

    return HIF_OK;
}

/**
* \brief De-serializes the RQB from the HIF shared memory into the hosts local memory - according to the component ID and OP-code in the RQB.
*
* @param [in] hSysDev           - system handle 
* @param [in] pHifPipeHandle    - pipe handle
* @param [in] pRqbSrc           - pointer to the serialized RQB in the transfer memory
* @param [out] ppRqbDest        - pointer to the RQB deserialized in the hosts local memory
*
* @return HIF_OK                - success
* @return HIF_ERR_RESOURCE      - Not enough local memory
*/
LSA_UINT16      hif_ioh_deserialize_lower (
        HIF_SYS_HANDLE hSysDev,
        LSA_VOID* pHifPipeHandle,
        LSA_VOID* pRqbSrc,
        LSA_VOID** ppRqbDest )
{
    LSA_UINT8* help_ptr = LSA_NULL;
    IOH_RQB_TYPE* new_rqb  = LSA_NULL;
    LSA_OPCODE_TYPE opcode;
    LSA_VOID* ptr_rqb_src = (LSA_VOID*)pRqbSrc;
    IOH_RQB_TYPE** ptr_ptr_rqb_dest = (IOH_RQB_TYPE**)ppRqbDest;
    LSA_UINT32 rqb_size = 0;
    LSA_UINT32 i=0;
    LSA_UNUSED_ARG(hSysDev);
    LSA_UNUSED_ARG(pHifPipeHandle);

    HIF_ASSERT(HIF_IS_NOT_NULL(ptr_ptr_rqb_dest)); /*#17*/
    HIF_ASSERT(HIF_IS_NOT_NULL(ptr_rqb_src));

    HIF_DESER_GET_OPCODE(ptr_rqb_src, opcode);

    if (opcode==IOH_OPC_OPEN_CHANNEL)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "channel" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.channel, sizeof(*new_rqb->args.u.channel), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.channel))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.channel = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.channel)) /*#if1*/
            {
                HIF_SER_SYS_PATH_SHMTH(&new_rqb->args.u.channel->sys_path,(LSA_UINT32**)&help_ptr);                /* sys_path */
                HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.channel->hd_count,(LSA_UINT32**)&help_ptr);                /* hd_count */
            }
        }
    }
    else if (opcode==IOH_OPC_CLOSE_CHANNEL)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "channel" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.channel, sizeof(*new_rqb->args.u.channel), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.channel))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.channel = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
        }
    }
    else if  ((opcode==IOH_OPC_JOB_CREATE)
            ||(opcode==IOH_OPC_JOB_CHANGE)
            ||(opcode==IOH_OPC_JOB_REPLACE)
            ||(opcode==IOH_OPC_CONSUMER_JOB_CREATE)
            ||(opcode==IOH_OPC_PROVIDER_JOB_CREATE))
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "job_array" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.job_array, sizeof(*new_rqb->args.u.job_array)+ (HIF_SHMTOL_L(*((LSA_UINT32*)HIF_CAST_TO_VOID_PTR(help_ptr+4)))-1)*sizeof(IOH_RQB_ARGS_JOB_TYPE), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.job_array))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.job_array = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.job_array)) /*#if1*/
            {
                /* INFO: deserialize the array size from right after the pointer */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->number_of_jobs,(LSA_UINT32**)&help_ptr);                /* number_of_jobs */
                for(i=0;i<new_rqb->args.u.job_array->number_of_jobs;i++)                                                /* job_array*/
                {
                    HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.job_array->job_array[i].attributes.flags,(LSA_UINT32**)&help_ptr);                    /* flags */
                    HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.job_array->job_array[i].attributes.pars.timer.cycle_ms,(LSA_UINT32**)&help_ptr);                    /* cycle_ms */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.job_array->job_array[i].attributes.pars.isochronous.IntSrc,(LSA_UINT32**)&help_ptr);                    /* IntSrc */
                    HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.job_array->job_array[i].attributes.pars.isochronous.CACF,(LSA_UINT32**)&help_ptr);                    /* CACF */
                    HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.job_array->job_array[i].attributes.pars.isochronous.ReductionRatio,(LSA_UINT32**)&help_ptr);                    /* ReductionRatio */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].attributes.pars.isochronous.Tm_ns,(LSA_UINT32**)&help_ptr);                    /* Tm_ns */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].attributes.pars.isochronous.Te_ns,(LSA_UINT32**)&help_ptr);                    /* Te_ns */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].attributes.pars.isochronous.Tk_ns,(LSA_UINT32**)&help_ptr);                    /* Tk_ns */
                    HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.job_array->job_array[i].cmd.type,(LSA_UINT32**)&help_ptr);                    /* type */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.job_array->job_array[i].cmd.pars.copy_par.src.width,(LSA_UINT32**)&help_ptr);                    /* width */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.copy_par.src.offset,(LSA_UINT32**)&help_ptr);                    /* offset */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.copy_par.src.buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.job_array->job_array[i].cmd.pars.copy_par.dst.width,(LSA_UINT32**)&help_ptr);                    /* width */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.copy_par.dst.offset,(LSA_UINT32**)&help_ptr);                    /* offset */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.copy_par.dst.buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.copy_par.len,(LSA_UINT32**)&help_ptr);                    /* len */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.job_array->job_array[i].cmd.pars.shift_par.address.width,(LSA_UINT32**)&help_ptr);                    /* width */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.shift_par.address.offset,(LSA_UINT32**)&help_ptr);                    /* offset */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.shift_par.address.buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.job_array->job_array[i].cmd.pars.shift_par.cnt_bits,(LSA_UINT32**)&help_ptr);                    /* cnt_bits */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.shift_par.start_value,(LSA_UINT32**)&help_ptr);                    /* start_value */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.job_array->job_array[i].cmd.pars.inc_par.address.width,(LSA_UINT32**)&help_ptr);                    /* width */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.inc_par.address.offset,(LSA_UINT32**)&help_ptr);                    /* offset */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.inc_par.address.buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.inc_par.start_value,(LSA_UINT32**)&help_ptr);                    /* start_value */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.inc_par.end_value,(LSA_UINT32**)&help_ptr);                    /* end_value */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.inc_par.inc_value,(LSA_UINT32**)&help_ptr);                    /* inc_value */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.inc_par.iodata_len,(LSA_UINT32**)&help_ptr);                    /* iodata_len */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.src.width,(LSA_UINT32**)&help_ptr);                    /* width */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.src.offset,(LSA_UINT32**)&help_ptr);                    /* offset */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.src.buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.check.width,(LSA_UINT32**)&help_ptr);                    /* width */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.check.offset,(LSA_UINT32**)&help_ptr);                    /* offset */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.check.buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.length,(LSA_UINT32**)&help_ptr);                    /* length */
                    if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr) && new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.length > 0 ) /*#22d*/
                    {
                        help_ptr+=HIF_SER_SIZEOF(4); /* skip buffer pointer */
                        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.check_data,new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.length, LSA_COMP_ID_IOH, HIF_MEM_TYPE_BUFFER );
                        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() allocate buffer buffer_size(%d) opc(%d) shm_addr(0x%08x) pRQB(0x%08x)",new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.length,opcode,help_ptr,new_rqb+4);
                        if (HIF_IS_NOT_NULL(new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.check_data)) /*#23*/
                        {
                            HIF_SER_COPY_SHMTH_BUF(new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.check_data,&help_ptr,new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.length);                    /* check_data */
                        }
                        else
                        {
                            return HIF_ERR_RESOURCE;
                        }
                    }
                    else
                    {
                        new_rqb->args.u.job_array->job_array[i].cmd.pars.check_par.check_data = LSA_NULL; /* set data buffer pointer to NULL */
                        help_ptr+=HIF_SER_SIZEOF(4);          /* skip buffer-pointer */
                    }
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.job_array->job_array[i].cmd.pars.consistency_check_par.address.width,(LSA_UINT32**)&help_ptr);                    /* width */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.consistency_check_par.address.offset,(LSA_UINT32**)&help_ptr);                    /* offset */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.consistency_check_par.address.buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_array->job_array[i].cmd.pars.consistency_check_par.iodata_len,(LSA_UINT32**)&help_ptr);                    /* iodata_len */
                }
            }
        }
    }
    else if (opcode==IOH_OPC_JOB_DELETE)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "job_handle_array" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.job_handle_array, sizeof(*new_rqb->args.u.job_handle_array)+ (HIF_SHMTOL_L(*((LSA_UINT32*)HIF_CAST_TO_VOID_PTR(help_ptr+4)))-1)*sizeof(IOH_JOB_HANDLE_TYPE), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.job_handle_array))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.job_handle_array = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.job_handle_array)) /*#if1*/
            {
                /* INFO: deserialize the array size from right after the pointer */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_handle_array->number_of_handle,(LSA_UINT32**)&help_ptr);                /* number_of_handle */
                for(i=0;i<new_rqb->args.u.job_handle_array->number_of_handle;i++)                                                /* handle_array*/
                {
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_handle_array->handle_array[i].handle,(LSA_UINT32**)&help_ptr);                    /* handle */
                }
            }
        }
    }
    else if (opcode==IOH_OPC_JOB_INFO_IND)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "job_info_ind" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.job_info_ind, sizeof(*new_rqb->args.u.job_info_ind), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.job_info_ind))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.job_info_ind = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.job_info_ind)) /*#if1*/
            {
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_info_ind->handle,(LSA_UINT32**)&help_ptr);                /* handle */
            }
        }
    }
    else if (opcode==IOH_OPC_MEM_READ)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "mem_read_array" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.mem_read_array, sizeof(*new_rqb->args.u.mem_read_array)+ (HIF_SHMTOL_L(*((LSA_UINT32*)HIF_CAST_TO_VOID_PTR(help_ptr+4)))-1)*sizeof(IOH_RQB_ARGS_MEM_READ_TYPE), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.mem_read_array))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.mem_read_array = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.mem_read_array)) /*#if1*/
            {
                /* INFO: deserialize the array size from right after the pointer */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.mem_read_array->number_of_mem_read,(LSA_UINT32**)&help_ptr);                /* number_of_mem_read */
                for(i=0;i<new_rqb->args.u.mem_read_array->number_of_mem_read;i++)                                                /* mem_read_array*/
                {
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.mem_read_array->mem_read_array[i].len,(LSA_UINT32**)&help_ptr);                    /* len */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.mem_read_array->mem_read_array[i].src_offset,(LSA_UINT32**)&help_ptr);                    /* src_offset */
                    if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr) && new_rqb->args.u.mem_read_array->mem_read_array[i].len > 0 ) /*#22d*/
                    {
                        help_ptr+=HIF_SER_SIZEOF(4); /* skip buffer pointer */
                        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.mem_read_array->mem_read_array[i].dst,new_rqb->args.u.mem_read_array->mem_read_array[i].len, LSA_COMP_ID_IOH, HIF_MEM_TYPE_BUFFER );
                        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() allocate buffer buffer_size(%d) opc(%d) shm_addr(0x%08x) pRQB(0x%08x)",new_rqb->args.u.mem_read_array->mem_read_array[i].len,opcode,help_ptr,new_rqb+4);
                        if (HIF_IS_NOT_NULL(new_rqb->args.u.mem_read_array->mem_read_array[i].dst)) /*#23*/
                        {
                            HIF_SER_COPY_SHMTH_BUF(new_rqb->args.u.mem_read_array->mem_read_array[i].dst,&help_ptr,new_rqb->args.u.mem_read_array->mem_read_array[i].len);                    /* dst */
                        }
                        else
                        {
                            return HIF_ERR_RESOURCE;
                        }
                    }
                    else
                    {
                        new_rqb->args.u.mem_read_array->mem_read_array[i].dst = LSA_NULL; /* set data buffer pointer to NULL */
                        help_ptr+=HIF_SER_SIZEOF(4);          /* skip buffer-pointer */
                    }
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.mem_read_array->mem_read_array[i].buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                }
            }
        }
    }
    else if (opcode==IOH_OPC_MEM_WRITE)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "mem_write_array" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.mem_write_array, sizeof(*new_rqb->args.u.mem_write_array)+ (HIF_SHMTOL_L(*((LSA_UINT32*)HIF_CAST_TO_VOID_PTR(help_ptr+4)))-1)*sizeof(IOH_RQB_ARGS_MEM_WRITE_TYPE), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.mem_write_array))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.mem_write_array = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.mem_write_array)) /*#if1*/
            {
                /* INFO: deserialize the array size from right after the pointer */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.mem_write_array->number_of_mem_write,(LSA_UINT32**)&help_ptr);                /* number_of_mem_write */
                for(i=0;i<new_rqb->args.u.mem_write_array->number_of_mem_write;i++)                                                /* mem_write_array*/
                {
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.mem_write_array->mem_write_array[i].len,(LSA_UINT32**)&help_ptr);                    /* len */
                    if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr) && new_rqb->args.u.mem_write_array->mem_write_array[i].len > 0 ) /*#22d*/
                    {
                        help_ptr+=HIF_SER_SIZEOF(4); /* skip buffer pointer */
                        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.mem_write_array->mem_write_array[i].src,new_rqb->args.u.mem_write_array->mem_write_array[i].len, LSA_COMP_ID_IOH, HIF_MEM_TYPE_BUFFER );
                        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() allocate buffer buffer_size(%d) opc(%d) shm_addr(0x%08x) pRQB(0x%08x)",new_rqb->args.u.mem_write_array->mem_write_array[i].len,opcode,help_ptr,new_rqb+4);
                        if (HIF_IS_NOT_NULL(new_rqb->args.u.mem_write_array->mem_write_array[i].src)) /*#23*/
                        {
                            HIF_SER_COPY_SHMTH_BUF(new_rqb->args.u.mem_write_array->mem_write_array[i].src,&help_ptr,new_rqb->args.u.mem_write_array->mem_write_array[i].len);                    /* src */
                        }
                        else
                        {
                            return HIF_ERR_RESOURCE;
                        }
                    }
                    else
                    {
                        new_rqb->args.u.mem_write_array->mem_write_array[i].src = LSA_NULL; /* set data buffer pointer to NULL */
                        help_ptr+=HIF_SER_SIZEOF(4);          /* skip buffer-pointer */
                    }
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.mem_write_array->mem_write_array[i].dst_offset,(LSA_UINT32**)&help_ptr);                    /* dst_offset */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.mem_write_array->mem_write_array[i].buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                }
            }
        }
    }
    else if (opcode==IOH_OPC_MEM_WRITE_IOXS)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "mem_write_ioxs" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.mem_write_ioxs, sizeof(*new_rqb->args.u.mem_write_ioxs)+ (HIF_SHMTOL_L(*((LSA_UINT32*)HIF_CAST_TO_VOID_PTR(help_ptr+4)))-1)*sizeof(IOH_RQB_ARGS_IOXS_TYPE), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.mem_write_ioxs))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.mem_write_ioxs = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.mem_write_ioxs)) /*#if1*/
            {
                /* INFO: deserialize the array size from right after the pointer */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.mem_write_ioxs->number_of_ioxs,(LSA_UINT32**)&help_ptr);                /* number_of_ioxs */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.mem_write_ioxs->buffer_handle,(LSA_UINT32**)&help_ptr);                /* buffer_handle */
                for(i=0;i<new_rqb->args.u.mem_write_ioxs->number_of_ioxs;i++)                                                /* ioxs_array*/
                {
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.mem_write_ioxs->ioxs_array[i].ioxs,(LSA_UINT32**)&help_ptr);                    /* ioxs */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.mem_write_ioxs->ioxs_array[i].offset,(LSA_UINT32**)&help_ptr);                    /* offset */
                }
            }
        }
    }
    else if (opcode==IOH_OPC_JOB_START)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "job_start_array" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.job_start_array, sizeof(*new_rqb->args.u.job_start_array)+ (HIF_SHMTOL_L(*((LSA_UINT32*)HIF_CAST_TO_VOID_PTR(help_ptr+4)))-1)*sizeof(IOH_JOB_START_TYPE ), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.job_start_array))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.job_start_array = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.job_start_array)) /*#if1*/
            {
                /* INFO: deserialize the array size from right after the pointer */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_start_array->number_of_jobs,(LSA_UINT32**)&help_ptr);                /* number_of_jobs */
                for(i=0;i<new_rqb->args.u.job_start_array->number_of_jobs;i++)                                                /* start_job*/
                {
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_start_array->start_job[i].handle,(LSA_UINT32**)&help_ptr);                    /* handle */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_start_array->start_job[i].start_value,(LSA_UINT32**)&help_ptr);                    /* start_value */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_start_array->start_job[i].init_data_length,(LSA_UINT32**)&help_ptr);                    /* init_data_length */
                    if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr) && new_rqb->args.u.job_start_array->start_job[i].init_data_length > 0 ) /*#22d*/
                    {
                        help_ptr+=HIF_SER_SIZEOF(4); /* skip buffer pointer */
                        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.job_start_array->start_job[i].init_data,new_rqb->args.u.job_start_array->start_job[i].init_data_length, LSA_COMP_ID_IOH, HIF_MEM_TYPE_BUFFER );
                        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() allocate buffer buffer_size(%d) opc(%d) shm_addr(0x%08x) pRQB(0x%08x)",new_rqb->args.u.job_start_array->start_job[i].init_data_length,opcode,help_ptr,new_rqb+4);
                        if (HIF_IS_NOT_NULL(new_rqb->args.u.job_start_array->start_job[i].init_data)) /*#23*/
                        {
                            HIF_SER_COPY_SHMTH_BUF(new_rqb->args.u.job_start_array->start_job[i].init_data,&help_ptr,new_rqb->args.u.job_start_array->start_job[i].init_data_length);                    /* init_data */
                        }
                        else
                        {
                            return HIF_ERR_RESOURCE;
                        }
                    }
                    else
                    {
                        new_rqb->args.u.job_start_array->start_job[i].init_data = LSA_NULL; /* set data buffer pointer to NULL */
                        help_ptr+=HIF_SER_SIZEOF(4);          /* skip buffer-pointer */
                    }
                }
            }
        }
    }
    else if (opcode==IOH_OPC_JOB_STOP)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "job_stop_array" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.job_stop_array, sizeof(*new_rqb->args.u.job_stop_array)+ (HIF_SHMTOL_L(*((LSA_UINT32*)HIF_CAST_TO_VOID_PTR(help_ptr+4)))-1)*sizeof(IOH_JOB_STOP_TYPE ), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.job_stop_array))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.job_stop_array = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.job_stop_array)) /*#if1*/
            {
                /* INFO: deserialize the array size from right after the pointer */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_stop_array->number_of_jobs,(LSA_UINT32**)&help_ptr);                /* number_of_jobs */
                for(i=0;i<new_rqb->args.u.job_stop_array->number_of_jobs;i++)                                                /* stop_job*/
                {
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_stop_array->stop_job[i].handle,(LSA_UINT32**)&help_ptr);                    /* handle */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.job_stop_array->stop_job[i].current_data_length,(LSA_UINT32**)&help_ptr);                    /* current_data_length */
                    if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr) && new_rqb->args.u.job_stop_array->stop_job[i].current_data_length > 0 ) /*#22d*/
                    {
                        help_ptr+=HIF_SER_SIZEOF(4); /* skip buffer pointer */
                        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.job_stop_array->stop_job[i].current_data,new_rqb->args.u.job_stop_array->stop_job[i].current_data_length, LSA_COMP_ID_IOH, HIF_MEM_TYPE_BUFFER );
                        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() allocate buffer buffer_size(%d) opc(%d) shm_addr(0x%08x) pRQB(0x%08x)",new_rqb->args.u.job_stop_array->stop_job[i].current_data_length,opcode,help_ptr,new_rqb+4);
                        if (HIF_IS_NOT_NULL(new_rqb->args.u.job_stop_array->stop_job[i].current_data)) /*#23*/
                        {
                            HIF_SER_COPY_SHMTH_BUF(new_rqb->args.u.job_stop_array->stop_job[i].current_data,&help_ptr,new_rqb->args.u.job_stop_array->stop_job[i].current_data_length);                    /* current_data */
                        }
                        else
                        {
                            return HIF_ERR_RESOURCE;
                        }
                    }
                    else
                    {
                        new_rqb->args.u.job_stop_array->stop_job[i].current_data = LSA_NULL; /* set data buffer pointer to NULL */
                        help_ptr+=HIF_SER_SIZEOF(4);          /* skip buffer-pointer */
                    }
                }
            }
        }
    }
    else if (opcode==IOH_OPC_PI_ALLOC)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "pi_alloc_array" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.pi_alloc_array, sizeof(*new_rqb->args.u.pi_alloc_array)+ (HIF_SHMTOL_L(*((LSA_UINT32*)HIF_CAST_TO_VOID_PTR(help_ptr+4)))-1)*sizeof(IOH_RQB_ARGS_PI_ALLOC_TYPE), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.pi_alloc_array))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.pi_alloc_array = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.pi_alloc_array)) /*#if1*/
            {
                /* INFO: deserialize the array size from right after the pointer */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->number_of_pi_alloc,(LSA_UINT32**)&help_ptr);                /* number_of_pi_alloc */
                for(i=0;i<new_rqb->args.u.pi_alloc_array->number_of_pi_alloc;i++)                                                /* pi_alloc_array*/
                {
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].init_value,(LSA_UINT32**)&help_ptr);                    /* init_value */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].is_provider,(LSA_UINT32**)&help_ptr);                    /* is_provider */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].is_dfp,(LSA_UINT32**)&help_ptr);                    /* is_dfp */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].is_device,(LSA_UINT32**)&help_ptr);                    /* is_device */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].partial_length,(LSA_UINT32**)&help_ptr);                    /* partial_length */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].partial_offset,(LSA_UINT32**)&help_ptr);                    /* partial_offset */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].apdu_status_length,(LSA_UINT32**)&help_ptr);                    /* apdu_status_length */
                    HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].prov_type,(LSA_UINT32**)&help_ptr);                    /* prov_type */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].edd_cr_number,(LSA_UINT32**)&help_ptr);                    /* edd_cr_number */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].edd_properties,(LSA_UINT32**)&help_ptr);                    /* edd_properties */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].edd_data_offset,(LSA_UINT32**)&help_ptr);                    /* edd_data_offset */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].edd_forward_mode,(LSA_UINT32**)&help_ptr);                    /* edd_forward_mode */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_alloc_array->pi_alloc_array[i].edd_ct_outdatastart,(LSA_UINT32**)&help_ptr);                    /* edd_ct_outdatastart */
                }
            }
        }
    }
    else if (opcode==IOH_OPC_PI_FREE)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "pi_free_array" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.pi_free_array, sizeof(*new_rqb->args.u.pi_free_array)+ (HIF_SHMTOL_L(*((LSA_UINT32*)HIF_CAST_TO_VOID_PTR(help_ptr+4)))-1)*sizeof(IOH_RQB_ARGS_PI_FREE_TYPE), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.pi_free_array))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.pi_free_array = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.pi_free_array)) /*#if1*/
            {
                /* INFO: deserialize the array size from right after the pointer */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_free_array->number_of_pi_free,(LSA_UINT32**)&help_ptr);                /* number_of_pi_free */
                for(i=0;i<new_rqb->args.u.pi_free_array->number_of_pi_free;i++)                                                /* pi_free_array*/
                {
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.pi_free_array->pi_free_array[i].buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                }
            }
        }
    }
    else if (opcode==IOH_OPC_UPDATE_IO_PARAMS)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "update_io_params_array" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.update_io_params_array, sizeof(*new_rqb->args.u.update_io_params_array)+ (HIF_SHMTOL_L(*((LSA_UINT32*)HIF_CAST_TO_VOID_PTR(help_ptr+4)))-1)*sizeof(IOH_RQB_ARGS_UPDATE_IO_PARAMS_TYPE), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.update_io_params_array))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.update_io_params_array = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.update_io_params_array)) /*#if1*/
            {
                /* INFO: deserialize the array size from right after the pointer */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.update_io_params_array->number_of_update_io_params,(LSA_UINT32**)&help_ptr);                /* number_of_update_io_params */
                for(i=0;i<new_rqb->args.u.update_io_params_array->number_of_update_io_params;i++)                                                /* update_io_params_array*/
                {
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.update_io_params_array->update_io_params_array[i].CWOffset,(LSA_UINT32**)&help_ptr);                    /* CWOffset */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.update_io_params_array->update_io_params_array[i].DataStatusOffset,(LSA_UINT32**)&help_ptr);                    /* DataStatusOffset */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.update_io_params_array->update_io_params_array[i].APDUStatusOffset,(LSA_UINT32**)&help_ptr);                    /* APDUStatusOffset */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.update_io_params_array->update_io_params_array[i].GroupID,(LSA_UINT32**)&help_ptr);                    /* GroupID */
                    HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.update_io_params_array->update_io_params_array[i].ARSetID,(LSA_UINT32**)&help_ptr);                    /* ARSetID */
                    HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.update_io_params_array->update_io_params_array[i].PrimaryARID,(LSA_UINT32**)&help_ptr);                    /* PrimaryARID */
                    HIF_SER_COPY_SHMTH_8(&new_rqb->args.u.update_io_params_array->update_io_params_array[i].ProvType,(LSA_UINT32**)&help_ptr);                    /* ProvType */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.update_io_params_array->update_io_params_array[i].buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                }
            }
        }
    }
    else if (opcode==IOH_OPC_SET_DS)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "set_ds" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.set_ds, sizeof(*new_rqb->args.u.set_ds)+ (HIF_SHMTOL_L(*((LSA_UINT32*)HIF_CAST_TO_VOID_PTR(help_ptr+4)))-1)*sizeof(IOH_RQB_ARGS_SET_DS_TYPE), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.set_ds))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.set_ds = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.set_ds)) /*#if1*/
            {
                /* INFO: deserialize the array size from right after the pointer */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.set_ds->number_of_set_ds,(LSA_UINT32**)&help_ptr);                /* number_of_set_ds */
                HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.set_ds->primary_ar_id,(LSA_UINT32**)&help_ptr);                /* primary_ar_id */
                HIF_SER_COPY_SHMTH_16(&new_rqb->args.u.set_ds->ar_set_id,(LSA_UINT32**)&help_ptr);                /* ar_set_id */
                for(i=0;i<new_rqb->args.u.set_ds->number_of_set_ds;i++)                                                /* set_ds_array*/
                {
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.set_ds->set_ds_array[i].set_ds_cmd,(LSA_UINT32**)&help_ptr);                    /* set_ds_cmd */
                    HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.set_ds->set_ds_array[i].buffer_handle,(LSA_UINT32**)&help_ptr);                    /* buffer_handle */
                }
            }
        }
    }
    else if (opcode==IOH_OPC_CONSUMER_IND_PROVIDE)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "consumer_ind" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.consumer_ind, sizeof(*new_rqb->args.u.consumer_ind), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.consumer_ind))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.consumer_ind = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
        }
    }
    else if (opcode==IOH_OPC_COPY_PROVIDER_UPDATE)
    {
        /* calculate rqb-size */
        rqb_size=sizeof(IOH_RQB_TYPE) + HIF_SER_SIZEOF(4);        /* RQB-size + original upper RQB pointer */
        help_ptr = (LSA_UINT8*)ptr_rqb_src;

        HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb, rqb_size, LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB);
        HIF_PROGRAM_TRACE_04(0,LSA_TRACE_LEVEL_NOTE_LOW,"hif_ioh_deserialize_lower() opc(%d) rqb_size(%d) shm_addr(0x%08x) pRQB(0x%08x)",opcode,rqb_size,help_ptr,new_rqb+4);
        if (HIF_IS_NULL(new_rqb))
        {
            return HIF_ERR_RESOURCE;
        }
        else
        {
            HIF_SER_COPY_SHMTH_32((LSA_UINT32*)new_rqb,(LSA_UINT32**)&help_ptr);            /* orig. upper RQB pointer */
            new_rqb=(IOH_RQB_TYPE*)HIF_CAST_TO_VOID_PTR((LSA_UINT8*)new_rqb+HIF_SER_SIZEOF(4));                                     /* real lower rqb src without orig. upper RQB pointer */
            *ptr_ptr_rqb_dest = new_rqb;                                    /* return real lower rqb src without orig. upper RQB pointer */

            /* restore Lower RQB */
            HIF_RQB_SET_OPCODE(new_rqb,opcode);                        /* _opcode */
            help_ptr+=4;                        /* skip opcode on shared-mem */
            HIF_SER_COPY_SHMTH_8(&new_rqb->args.hd_nr,(LSA_UINT32**)&help_ptr);            /* hd_nr */

            if (HIF_IS_NOT_NULL_U32_REF_BY_PTR(help_ptr))            /* check pointer "provider_update" on shared-mem */ /*#18*/
            {
                HIF_ALLOC_LOCAL_MEM((LSA_VOID**)&new_rqb->args.u.provider_update, sizeof(*new_rqb->args.u.provider_update), LSA_COMP_ID_IOH, HIF_MEM_TYPE_RQB );
                if (HIF_IS_NULL(new_rqb->args.u.provider_update))
                {
                    return HIF_ERR_RESOURCE;
                }
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            else
            {
                new_rqb->args.u.provider_update = LSA_NULL;
                help_ptr+=HIF_SER_SIZEOF(4);
            }
            if (HIF_IS_NOT_NULL(new_rqb->args.u.provider_update)) /*#if1*/
            {
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.provider_update->handle,(LSA_UINT32**)&help_ptr);                /* handle */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.provider_update->provider_data,(LSA_UINT32**)&help_ptr);                /* provider_data */
                HIF_SER_COPY_SHMTH_32(&new_rqb->args.u.provider_update->provider_data_length,(LSA_UINT32**)&help_ptr);                /* provider_data_length */
            }
        }
    }
    else
    {
        HIF_PROGRAM_TRACE_02(0,LSA_TRACE_LEVEL_FATAL,"hif_ioh_deserialize_lower(). RQB-Opcode:0x%x is not valid! shm_addr(0x%08x)", opcode, ptr_rqb_src);
        HIF_FATAL(0);
    }
    HIF_RQB_SET_COMP_ID(new_rqb, LSA_COMP_ID_IOH);            /* set comp id */
    *ptr_ptr_rqb_dest = new_rqb;

    /* Check for overwrite */
    HIF_SHM_CHECK_OVERWRITE_DESERIALIZE(ptr_rqb_src, opcode, help_ptr, "hif_ioh_deserialize_lower");

    return HIF_OK;
}


//lint -restore -e506
//lint -restore -e774

#endif /* of HIF_CFG_USE_IOH */
#if defined(TOOL_CHAIN_MICROSOFT) /* Microsoft Visual C++ */
#pragma component(browser, on, references)
#endif
/*****************************************************************************/
/* End of File                                                               */
/*****************************************************************************/
