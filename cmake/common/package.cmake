# Packaging
set( CPACK_PACKAGE_VERSION ${PROJECT_VERSION})
set( CPACK_PACKAGE_VERSION_MAJOR ${PROJECT_VERSION_MAJOR} )
set( CPACK_PACKAGE_VERSION_MINOR ${PROJECT_VERSION_MINOR} )
set( CPACK_PACKAGE_VERSION_PATCH ${PROJECT_VERSION_PATCH} )

# build a CPack driven installer package
set ( CPACK_PACKAGE_NAME "${PROJECT_NAME}" )
set ( CPACK_PACKAGE_VENDOR "${PROJECT_VENDOR}" )
set ( CPACK_PACKAGE_CONTACT "info@bertram-bevern.de" )
set ( CPACK_PACKAGE_INSTALL_DIRECTORY "${CPACK_PACKAGE_NAME}" )
set ( CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION}" )

if ( APPLE )
  set ( CPACK_GENERATOR "ZIP" )
elseif ( WIN32 )
  set ( CPACK_NSIS_MODIFY_PATH ON )
  set ( CPACK_PACKAGE_EXECUTABLES "${PROJECT_NAME}" "${PROJECT_NAME}" )
  set ( CPACK_CREATE_DESKTOP_LINKS "${PROJECT_NAME}" "${PROJECT_NAME}" )
  set ( CPACK_NSIS_MENU_LINKS "http://www.bertram-bevern.de" "${PROJECT_VENDOR}")
  set ( CPACK_NSIS_ENABLE_UNINSTALL_BEFORE_INSTALL ON )
  set ( CPACK_NSIS_HELP_LINK "http://www.bertram-bevern.de" )
  set ( CPACK_NSIS_URL_INFO_ABOUT "http://www.bertram-bevern.de" )
  set ( CPACK_NSIS_CONTACT "info@bertram-bevern.de" )
  set ( CPACK_NSIS_EXECUTABLES_DIRECTORY "." )
  set ( CPACK_NSIS_MUI_FINISHPAGE_RUN "${PROJECT_NAME}.exe" )
  set ( CPACK_NSIS_INSTALLED_ICON_NAME "${PROJECT_NAME}.exe" )
  set ( CPACK_NSIS_INSTALL_ROOT "C:\\\\Bertram" )
  set ( CPACK_PACKAGE_INSTALL_DIRECTORY "${PROJECT_NAME}" )
  set ( CMAKE_INSTALL_SYSTEM_RUNTIME_DESTINATION . )
  set ( CMAKE_INSTALL_SYSTEM_RUNTIME_COMPONENT Runtime )
  set ( CMAKE_INSTALL_UCRT_LIBRARIES TRUE )
  include( InstallRequiredSystemLibraries )
endif ()

include( CPack )